Ext.define("Ext.ux.ColorField",{extend:"Ext.form.field.Trigger",alias:"widget.colorfield",requires:["Ext.form.field.VTypes","Ext.layout.component.field.Text"],lengthText:"O tamanho m\u00e1ximo para este campo \u00e9 6",blankText:"Este campo \u00e9 obrigat\u00f3rio",maxLength:6,regex:/^[0-9a-f]{6}$/i,validateValue:function(n){return this.getEl()?!this.allowBlank&&!n?(this.markInvalid(Ext.String.format(this.blankText,n)),!0):n.length!=6?(this.markInvalid(Ext.String.format(this.lengthText,n)),!1):n.length<1&&!this.allowBlank||!this.regex.test(n)?(this.markInvalid(Ext.String.format(this.blankText,n)),!1):(this.markInvalid(),this.setColor(n),!0):!0},markInvalid:function(n){Ext.ux.ColorField.superclass.markInvalid.call(this,n),this.inputEl.setStyle({"background-image":"url(../Content/ext/resources/themes/images/default/grid/invalid_line.gif)"})},setValue:function(n){Ext.ux.ColorField.superclass.setValue.call(this,n),this.setColor(n)},setColor:function(n){Ext.ux.ColorField.superclass.setFieldStyle.call(this,{"background-color":n?"#"+n:"","background-image":"none"})},menuListeners:{select:function(n,t){this.setValue(t)},show:function(){this.onFocus()},hide:function(){this.focus(),this.menu.un("select",this.menuListeners.select,this),this.menu.un("show",this.menuListeners.show,this),this.menu.un("hide",this.menuListeners.hide,this)}},onTriggerClick:function(){if(!this.disabled){this.menu=new Ext.menu.ColorPicker({shadow:!0,autoShow:!0}),this.menu.alignTo(this.inputEl,"tl-bl?"),this.menu.doLayout();this.menu.on(Ext.apply({},this.menuListeners,{scope:this}));this.menu.show(this.inputEl)}}})
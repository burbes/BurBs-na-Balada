Ext.override(Ext.form.Basic,{getValues:function(n,t,i,r){var u={};return this.getFields().each(function(n){var f,e,o;if(n.isSubmit=!0,(!t||n.isDirty())&&(f=n[r?"getModelData":"getSubmitData"](i),Ext.isObject(f))){if(n.refValue&&(f[n.refValue]=n.getRawValue()),n.refId&&(f[n.refId]=n.getValue()),n.ref&&n.displayTplData.length>0)for(e=0;e<n.ref.length;e++)o=n.ref[e],f[o.data]=n.displayTplData[0][o.field];Ext.iterate(f,function(t,r){if(i&&r===""&&(r=n.emptyText||""),t in u){var f=u[t],e=Ext.isArray;e(f)||(f=u[t]=[f]),e(r)?u[t]=f.concat(r):f.push(r)}else u[t]=r})}n.isSubmit=!1}),n&&(u=Ext.Object.toQueryString(u)),u}})
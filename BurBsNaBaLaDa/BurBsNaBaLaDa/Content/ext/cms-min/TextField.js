Ext.form.field.Text.override({isSubmit:!1,upperCase:!0,setValue:function(){var f=this,e=arguments,r=e[0],u=this.getMask(),n,i,o,t;if(u&&this.xtype==="textfield"&&r&&r.length!=u.viewMask.length){if(n=u.viewMask,Ext.isIE){for(i=new String,o=0,t=0;t<n.toString().length;t++)i=n.charAt(t)=="_"?i.concat(r.charAt(o++)):i.concat(n.charAt(t));n=i}else for(t=0;t<r.toString().length;t++)n=n.replace("_",r[t]);n.length==u.rawMask.length&&(e[0]=n)}return f.callParent(arguments),this._cep&&(this._cepValue=f.getValue()),f},postBlur:function(){this.applyEmptyText(),this.getCep()},getCep:function(){this._cep&&this.inputEl.dom.value!=""&&this._cepValue!=this.getValue()&&Ext.Ajax.request({url:App._form._actions._cep,params:{cep:this.getValue()},method:"POST",success:function(n){var r=Ext.decode(n.responseText),i,f,u;this._cepValue=this.getValue(),i=App.get,r.success!=!1?(r=r[0],i(this._cep.bairro).setValue(r.bairro),i(this._cep.endereco).setValue(r.endereco),f=i(this._cep.estado),f.setDisabled(!0),f.setValue(r.id_estado),u=i(this._cep.cidade),u.setDisabled(!0),u.reset(),u.load({params:{id_estado:r.id_estado},callback:function(){this.setValue(r.id_cidade)}})):(i(this._cep.bairro).setValue(""),i(this._cep.endereco).setValue(""),f=i(this._cep.estado),u=i(this._cep.cidade),f.setDisabled(!1),f.reset(),u.setDisabled(!0),u.reset())},failure:function(){},scope:this})},getMask:function(){var t,n;if(this.plugins){for(t=null,n=0;n<this.plugins.length;n++)this.plugins[n].$className==="CMS.mask"&&(t=this.plugins[n]);return t}return undefined},changeMask:function(n){this.mask&&this.mask.removeMask(),this.mask=new CMS.mask(n),this.plugins||(this.plugins=[]),this.plugins.push(this.mask),this.mask.init(this)},removeMask:function(){this.mask&&this.mask.removeMask()},getValueMask:function(n,t){var i,f,u,r;if(this.plugins&&(i=this.getMask(),i&&n&&n!=i.viewMask&&(this.isSubmit||t===!0)&&(n=i.getValue(n,this),n=n==i.viewMask?"":n,Ext.isIE)))for(f=i.specialChars+"_",u=0;u<f.length;u++)for(r=0;r<n.toString().length;r++)n.charAt(r)==f.charAt(u)&&(n=n.replace(f.charAt(u),""),r--);return n},getValue:function(n){var i=this,t=i.callParent(arguments);return(i.xtype=="textfield"&&i.plugins&&(t=i.getValueMask(t,n)),typeof t=="string"&&i.upperCase===!0)?t.toString().toUpperCase():t},getRawValue:function(n){var i=this,t=i.callParent(arguments);return(i.xtype=="textfield"&&i.plugins&&(t=i.getValueMask(t,n)),typeof t=="string"&&i.upperCase===!0)?t.toString().toUpperCase():t},setFieldLabel:function(n){this.rendered?this.labelEl.update(n+this.labelSeparator):this.fieldLabel=n},getSubmitData:function(){var n=this,t=null;return n.submitValue&&!n.isFileUpload()&&(t={},t[n.getName()]=""+n.getValue()),t},getModelData:function(){var t=this,n=null;return t.isFileUpload()||(n={},n[t.getName()]=t.getValue()),n},checkChange:function(){if(!this.suspendCheckChange){var n=this,t=n.getValue(),i=n.lastValue;if(!n.isEqual(t,i)&&!n.isDestroyed){n.lastValue=t,n.fireEvent("changefilter",n,t,i),n.fireEvent("change",n,t,i);n.onChange(t,i)}}}})